<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Boeing 777 - Tudo em Um</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0c0c2e 0%, #1a1a3e 100%);
            color: #f0f0f0;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        /* HEADER */
        .header {
            text-align: center;
            padding: 25px;
            margin-bottom: 25px;
            background: rgba(0, 20, 40, 0.7);
            border-radius: 15px;
            border: 2px solid rgba(0, 168, 255, 0.3);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        h1 {
            color: #00a8ff;
            margin-bottom: 10px;
            font-size: 2.5rem;
            text-shadow: 0 0 10px rgba(0, 168, 255, 0.5);
        }
        
        .subtitle {
            color: #aaddff;
            font-size: 1.1rem;
            margin-bottom: 15px;
        }
        
        .status {
            background: linear-gradient(90deg, #28a745, #20c997);
            color: white;
            padding: 10px 25px;
            border-radius: 25px;
            display: inline-block;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.3);
        }
        
        /* LAYOUT PRINCIPAL */
        .dashboard {
            display: flex;
            gap: 25px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .airplane-section, .reservation-section {
            flex: 1;
            min-width: 350px;
            background: rgba(10, 20, 40, 0.7);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid rgba(0, 168, 255, 0.2);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
        }
        
        .section-title {
            color: #00a8ff;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(0, 168, 255, 0.3);
            font-size: 1.8rem;
        }
        
        /* MAPA DE POLTRONAS */
        .seat-map-container {
            background: rgba(0, 10, 25, 0.5);
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            overflow-x: auto;
        }
        
        .seat-map {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin: 0 auto;
            max-width: 800px;
        }
        
        .seat-row {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 12px;
        }
        
        .row-label {
            width: 35px;
            text-align: center;
            color: #aaddff;
            font-weight: bold;
            font-size: 15px;
        }
        
        /* POLTRONAS */
        .seat {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
            font-size: 14px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .seat:hover:not(.occupied) {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.3);
        }
        
        .seat.selected {
            transform: translateY(-5px);
            box-shadow: 0 0 20px rgba(33, 150, 243, 0.7);
            border-color: #2196F3;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 10px rgba(33, 150, 243, 0.7); }
            50% { box-shadow: 0 0 20px rgba(33, 150, 243, 0.9); }
            100% { box-shadow: 0 0 10px rgba(33, 150, 243, 0.7); }
        }
        
        .seat.available {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
        }
        
        .seat.business {
            background: linear-gradient(135deg, #FF9800, #e68900);
            color: white;
        }
        
        .seat.first-class {
            background: linear-gradient(135deg, #9C27B0, #7b1fa2);
            color: white;
        }
        
        .seat.premium {
            background: linear-gradient(135deg, #2196F3, #0d8aee);
            color: white;
        }
        
        .seat.occupied {
            background: linear-gradient(135deg, #757575, #616161);
            color: #ccc;
            cursor: not-allowed;
            opacity: 0.7;
        }
        
        /* PAINEL DE RESERVA */
        .reservation-card {
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.15), rgba(0, 168, 255, 0.1));
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            border: 2px solid rgba(33, 150, 243, 0.4);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }
        
        .reservation-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .item-label {
            color: #aaddff;
            font-size: 16px;
        }
        
        .item-value {
            font-weight: bold;
            font-size: 18px;
        }
        
        .item-value.seat {
            color: #2196F3;
        }
        
        .item-value.email {
            color: #4CAF50;
        }
        
        .item-value.code {
            color: #FF9800;
            font-family: monospace;
            font-size: 20px;
        }
        
        /* FORMUL√ÅRIO EMBUTIDO */
        .embedded-form-container {
            background: rgba(0, 20, 40, 0.8);
            padding: 25px;
            border-radius: 15px;
            margin-top: 25px;
            border: 2px solid rgba(0, 168, 255, 0.3);
            display: none; /* Inicialmente escondido */
        }
        
        .form-frame {
            width: 100%;
            height: 500px;
            border: none;
            border-radius: 10px;
            background: white;
        }
        
        .form-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .close-form {
            background: #f44336;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
        
        /* BOT√ïES */
        .btn {
            padding: 18px;
            border: none;
            border-radius: 10px;
            font-size: 17px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            width: 100%;
            margin-bottom: 15px;
        }
        
        .btn-primary {
            background: linear-gradient(90deg, #4CAF50, #2E7D32);
            color: white;
        }
        
        .btn-primary:hover:not(:disabled) {
            background: linear-gradient(90deg, #45a049, #1B5E20);
            transform: translateY(-3px);
        }
        
        .btn-primary:disabled {
            background: #666;
            cursor: not-allowed;
            opacity: 0.6;
        }
        
        .btn-secondary {
            background: linear-gradient(90deg, #757575, #424242);
            color: white;
        }
        
        .btn-secondary:hover {
            background: linear-gradient(90deg, #616161, #303030);
            transform: translateY(-3px);
        }
        
        /* MENSAGENS */
        .message {
            position: fixed;
            top: 30px;
            right: 30px;
            padding: 20px 25px;
            border-radius: 10px;
            color: white;
            font-weight: bold;
            z-index: 1000;
            display: none;
            animation: slideIn 0.4s;
            min-width: 300px;
            max-width: 400px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border-left: 5px solid;
        }
        
        .message.success {
            background: rgba(76, 175, 80, 0.9);
            border-left-color: #2E7D32;
        }
        
        .message.error {
            background: rgba(244, 67, 54, 0.9);
            border-left-color: #C62828;
        }
        
        .message.info {
            background: rgba(33, 150, 243, 0.9);
            border-left-color: #1565C0;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        /* RESPONSIVO */
        @media (max-width: 768px) {
            .dashboard {
                flex-direction: column;
            }
            
            .seat {
                width: 35px;
                height: 35px;
                font-size: 13px;
            }
            
            .form-frame {
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- HEADER -->
        <header class="header">
            <h1>üõ©Ô∏è Sistema de Reservas Boeing 777 - Tudo em Um</h1>
            <p class="subtitle">Selecione sua poltrona e reserve diretamente nesta p√°gina</p>
            <div class="status">‚úÖ Sistema 100% Integrado - Nenhuma nova aba</div>
        </header>
        
        <!-- DASHBOARD -->
        <div class="dashboard">
            <!-- MAPA DE POLTRONAS -->
            <section class="airplane-section">
                <h2 class="section-title">Mapa de Poltronas Boeing 777</h2>
                <p style="color: #aaddff; margin-bottom: 15px;">Clique em uma poltrona dispon√≠vel</p>
                
                <div class="seat-map-container">
                    <div class="seat-map" id="seat-map">
                        <!-- Poltronas ser√£o geradas aqui -->
                    </div>
                </div>
                
                <!-- LEGENDAS -->
                <div style="display: flex; justify-content: center; gap: 15px; margin-top: 20px; flex-wrap: wrap;">
                    <div style="display: flex; align-items: center; gap: 5px;">
                        <div style="width: 15px; height: 15px; background: #4CAF50; border-radius: 3px;"></div>
                        <span style="font-size: 14px;">Dispon√≠vel</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 5px;">
                        <div style="width: 15px; height: 15px; background: #FF9800; border-radius: 3px;"></div>
                        <span style="font-size: 14px;">Business</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 5px;">
                        <div style="width: 15px; height: 15px; background: #9C27B0; border-radius: 3px;"></div>
                        <span style="font-size: 14px;">Primeira</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 5px;">
                        <div style="width: 15px; height: 15px; background: #757575; border-radius: 3px;"></div>
                        <span style="font-size: 14px;">Ocupada</span>
                    </div>
                </div>
            </section>
            
            <!-- PAINEL DE RESERVA -->
            <section class="reservation-section">
                <h2 class="section-title">Sua Reserva</h2>
                
                <!-- CARD DE RESUMO -->
                <div class="reservation-card">
                    <div class="reservation-item">
                        <span class="item-label">Poltrona:</span>
                        <span class="item-value seat" id="display-seat">
                            <span style="color: #aaa;">N√£o selecionada</span>
                        </span>
                    </div>
                    
                    <div class="reservation-item">
                        <span class="item-label">Status:</span>
                        <span class="item-value" id="display-status">
                            <span style="color: #aaa;">Aguardando sele√ß√£o</span>
                        </span>
                    </div>
                    
                    <div class="reservation-item">
                        <span class="item-label">C√≥digo:</span>
                        <span class="item-value" id="display-code">
                            <span style="color: #aaa;">---</span>
                        </span>
                    </div>
                </div>
                
                <!-- BOT√ïES DE A√á√ÉO -->
                <button class="btn btn-primary" id="reserve-btn" disabled>
                    üìã Reservar Esta Poltrona
                </button>
                
                <button class="btn btn-secondary" id="clear-btn">
                    üîÑ Selecionar Outra
                </button>
                
                <!-- FORMUL√ÅRIO GOOGLE FORMS EMBUTIDO -->
                <div class="embedded-form-container" id="form-container">
                    <div class="form-header">
                        <h3 style="color: #00a8ff;">üìù Formul√°rio de Reserva</h3>
                        <button class="close-form" id="close-form">‚úñ Fechar</button>
                    </div>
                    
                    <!-- O Forms ser√° carregado aqui -->
                    <div id="forms-iframe-container">
                        <p style="color: #aaddff; text-align: center; padding: 50px;">
                            Carregando formul√°rio...
                        </p>
                    </div>
                </div>
                
                <!-- INSTRU√á√ïES -->
                <div style="margin-top: 25px; padding: 20px; background: rgba(0, 20, 40, 0.5); border-radius: 10px; color: #aaddff;">
                    <h4>üìù Como funciona:</h4>
                    <ol style="padding-left: 20px; margin-top: 10px;">
                        <li>Selecione uma poltrona no mapa</li>
                        <li>Clique em "Reservar Esta Poltrona"</li>
                        <li>O formul√°rio aparecer√° nesta mesma p√°gina</li>
                        <li>Sua poltrona j√° estar√° preenchida</li>
                        <li>Complete com seu email e envie</li>
                        <li>Receba o c√≥digo de check-in automaticamente</li>
                    </ol>
                </div>
            </section>
        </div>
    </div>
    
    <!-- MENSAGENS -->
    <div class="message" id="message"></div>

    <script>
        // ============================================
        // CONFIGURA√á√ÉO DO SISTEMA
        // ============================================
        
        // SUA URL DO GOOGLE APPS SCRIPT
        const API_URL = "https://script.google.com/macros/s/AKfycbzTADq5yYnxF-y4UCOooftylc3cZo9wDJr5u-mTOeSS22Z7wqAdN_83AuRzpqqD98Jt/exec";
        
        // SEU GOOGLE FORMS (COM SEAT_AQUI)
        const FORM_URL = "https://docs.google.com/forms/d/e/1FAIpQLSe0tGjNhXh_9vjk_EAdhyZWx870rG8lVIr141OkfzCSgRMBXw/viewform?usp=pp_url&entry.1796450485=SEAT_AQUI";
        
        // ID do campo da poltrona (do seu Forms)
        const SEAT_FIELD_ID = "entry.1796450485";
        
        // ============================================
        // VARI√ÅVEIS DO SISTEMA
        // ============================================
        let selectedSeat = null;
        let occupiedSeats = [];
        let checkinCode = null;
        
        // ============================================
        // INICIALIZA√á√ÉO
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            createSeatMap();
            loadOccupiedSeats();
            setupEventListeners();
            updateDisplay();
        });
        
        // ============================================
        // CRIA MAPA DE POLTRONAS BOEING 777
        // ============================================
        function createSeatMap() {
            const seatMap = document.getElementById('seat-map');
            seatMap.innerHTML = '';
            
            // Primeira Classe (Fileiras 1-4)
            createSection(seatMap, "‚≠ê PRIMEIRA CLASSE", 1, 4, [['A'], ['D', 'G'], ['J']], 'first-class');
            
            // Business Class (Fileiras 5-12)
            createSection(seatMap, "‚ú® BUSINESS CLASS", 5, 12, [['A', 'B'], ['D', 'E', 'F'], ['H', 'J']], 'business');
            
            // Premium Economy (Fileiras 13-20)
            createSection(seatMap, "üíé PREMIUM ECONOMY", 13, 20, [['A', 'B', 'C'], ['D', 'E', 'F', 'G'], ['H', 'J', 'K']], 'premium');
            
            // Economy Class (Fileiras 21-40)
            createSection(seatMap, "üí∫ ECONOMY CLASS", 21, 40, [['A', 'B', 'C'], ['D', 'E', 'F', 'G'], ['H', 'J', 'K']], 'available');
        }
        
        function createSection(container, title, startRow, endRow, seatGroups, seatType) {
            // T√≠tulo da se√ß√£o
            const titleDiv = document.createElement('div');
            titleDiv.textContent = title;
            titleDiv.style.cssText = `
                color: ${seatType === 'first-class' ? '#9C27B0' : 
                         seatType === 'business' ? '#FF9800' : 
                         seatType === 'premium' ? '#2196F3' : '#4CAF50'};
                font-weight: bold;
                margin: 20px 0 10px 0;
                text-align: center;
                font-size: 14px;
            `;
            container.appendChild(titleDiv);
            
            // Cria cada fileira
            for (let row = startRow; row <= endRow; row++) {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'seat-row';
                
                // N√∫mero da fileira
                const rowLabel = document.createElement('div');
                rowLabel.className = 'row-label';
                rowLabel.textContent = row < 10 ? `0${row}` : row;
                rowDiv.appendChild(rowLabel);
                
                // Cria grupos de poltronas
                seatGroups.forEach((group, groupIndex) => {
                    const groupDiv = document.createElement('div');
                    groupDiv.style.display = 'flex';
                    groupDiv.style.gap = '5px';
                    if (groupIndex === 1) groupDiv.style.margin = '0 15px';
                    
                    group.forEach(letter => {
                        const seatId = `${row}${letter}`;
                        const seat = document.createElement('button');
                        seat.className = `seat ${seatType}`;
                        seat.textContent = letter;
                        seat.dataset.seat = seatId;
                        seat.title = `Poltrona ${seatId}`;
                        
                        seat.addEventListener('click', function() {
                            selectSeat(seatId);
                        });
                        
                        groupDiv.appendChild(seat);
                    });
                    
                    rowDiv.appendChild(groupDiv);
                });
                
                container.appendChild(rowDiv);
            }
        }
        
        // ============================================
        // CARREGA POLTRONAS OCUPADAS
        // ============================================
        function loadOccupiedSeats() {
            showMessage('üîÑ Carregando poltronas ocupadas...', 'info');
            
            fetch(API_URL + '?t=' + new Date().getTime())
                .then(response => response.json())
                .then(data => {
                    occupiedSeats = data;
                    updateSeatStatus();
                    showMessage(`‚úÖ ${data.length} poltronas ocupadas carregadas`, 'success');
                })
                .catch(error => {
                    console.log('Modo offline:', error);
                    occupiedSeats = ["1A", "5D", "12C", "15F", "22G"];
                    updateSeatStatus();
                    showMessage('‚ö†Ô∏è Modo offline ativado', 'info');
                });
        }
        
        function updateSeatStatus() {
            document.querySelectorAll('.seat').forEach(seat => {
                const seatId = seat.dataset.seat;
                
                if (occupiedSeats.includes(seatId)) {
                    seat.classList.remove('available', 'business', 'first-class', 'premium', 'selected');
                    seat.classList.add('occupied');
                    seat.title = `Poltrona ${seatId} - Ocupada`;
                    
                    if (selectedSeat === seatId) {
                        selectedSeat = null;
                        updateDisplay();
                        checkReservationReady();
                        showMessage('‚ö†Ô∏è Esta poltrona foi ocupada!', 'error');
                    }
                }
            });
        }
        
        // ============================================
        // SELE√á√ÉO DE POLTRONA
        // ============================================
        function selectSeat(seatId) {
            if (occupiedSeats.includes(seatId)) {
                showMessage('‚ùå Esta poltrona j√° est√° ocupada!', 'error');
                return;
            }
            
            // Remove sele√ß√£o anterior
            if (selectedSeat) {
                const prevSeat = document.querySelector(`[data-seat="${selectedSeat}"]`);
                if (prevSeat) {
                    prevSeat.classList.remove('selected');
                    const originalType = getSeatClass(selectedSeat);
                    prevSeat.classList.add(originalType);
                }
            }
            
            // Seleciona nova poltrona
            selectedSeat = seatId;
            const seatElement = document.querySelector(`[data-seat="${seatId}"]`);
            if (seatElement) {
                seatElement.classList.remove('available', 'business', 'first-class', 'premium');
                seatElement.classList.add('selected');
            }
            
            updateDisplay();
            checkReservationReady();
            showMessage(`‚úÖ Poltrona ${seatId} selecionada!`, 'success');
        }
        
        function getSeatClass(seatId) {
            const row = parseInt(seatId.replace(/[A-Z]/g, ''));
            
            if (row >= 1 && row <= 4) return 'first-class';
            if (row >= 5 && row <= 12) return 'business';
            if (row >= 13 && row <= 20) return 'premium';
            return 'available';
        }
        
        // ============================================
        // ATUALIZA DISPLAY
        // ============================================
        function updateDisplay() {
            const seatDisplay = document.getElementById('display-seat');
            const statusDisplay = document.getElementById('display-status');
            
            if (selectedSeat) {
                seatDisplay.innerHTML = `<span style="color: #2196F3; font-weight: bold;">${selectedSeat}</span>`;
                statusDisplay.innerHTML = '<span style="color: #4CAF50;">‚úÖ Pronto para reservar!</span>';
            } else {
                seatDisplay.innerHTML = '<span style="color: #aaa;">N√£o selecionada</span>';
                statusDisplay.innerHTML = '<span style="color: #aaa;">Aguardando sele√ß√£o</span>';
            }
        }
        
        // ============================================
        // VERIFICA SE PODE RESERVAR
        // ============================================
        function checkReservationReady() {
            const isReady = selectedSeat !== null && !occupiedSeats.includes(selectedSeat);
            document.getElementById('reserve-btn').disabled = !isReady;
        }
        
        // ============================================
        // CONFIGURA EVENT LISTENERS
        // ============================================
        function setupEventListeners() {
            // Bot√£o de reserva
            document.getElementById('reserve-btn').addEventListener('click', function() {
                showReservationForm();
            });
            
            // Bot√£o de limpar
            document.getElementById('clear-btn').addEventListener('click', function() {
                clearSelection();
            });
            
            // Bot√£o de fechar formul√°rio
            document.getElementById('close-form').addEventListener('click', function() {
                hideReservationForm();
            });
            
            // Atualiza√ß√£o autom√°tica
            setInterval(loadOccupiedSeats, 30000);
        }
        
        function clearSelection() {
            if (selectedSeat) {
                const seat = document.querySelector(`[data-seat="${selectedSeat}"]`);
                if (seat) {
                    seat.classList.remove('selected');
                    const originalType = getSeatClass(selectedSeat);
                    seat.classList.add(originalType);
                }
                selectedSeat = null;
            }
            
            updateDisplay();
            checkReservationReady();
            hideReservationForm();
            
            showMessage('üîÑ Sele√ß√£o limpa!', 'info');
        }
        
        // ============================================
        // FORMUL√ÅRIO DE RESERVA EMBUTIDO
        // ============================================
        function showReservationForm() {
            if (!selectedSeat) return;
            
            showMessage('üîÑ Preparando formul√°rio...', 'info');
            
            // Gera c√≥digo de check-in
            checkinCode = generateCheckinCode();
            document.getElementById('display-code').innerHTML = 
                `<span class="item-value code">${checkinCode}</span>`;
            
            // Monta URL do Forms com a poltrona pr√©-preenchida
            const formUrl = FORM_URL.replace('SEAT_AQUI', encodeURIComponent(selectedSeat));
            
            // Atualiza iframe
            const iframeContainer = document.getElementById('forms-iframe-container');
            iframeContainer.innerHTML = `
                <iframe 
                    class="form-frame"
                    src="${formUrl}"
                    id="forms-iframe"
                    onload="formLoaded()"
                ></iframe>
            `;
            
            // Mostra o formul√°rio
            document.getElementById('form-container').style.display = 'block';
            
            // Rola a p√°gina at√© o formul√°rio
            document.getElementById('form-container').scrollIntoView({ behavior: 'smooth' });
            
            showMessage('‚úÖ Formul√°rio carregado! Sua poltrona j√° est√° preenchida.', 'success');
        }
        
        function hideReservationForm() {
            document.getElementById('form-container').style.display = 'none';
        }
        
        function formLoaded() {
            console.log('Formul√°rio carregado!');
            
            // Inicia monitoramento do envio
            monitorFormSubmission();
        }
        
        // ============================================
        // MONITORAMENTO DO ENVIO DO FORMS
        // ============================================
        function monitorFormSubmission() {
            // Verifica periodicamente se a poltrona foi ocupada
            const checkInterval = setInterval(() => {
                fetch(API_URL + '?t=' + new Date().getTime())
                    .then(response => response.json())
                    .then(data => {
                        // Se a poltrona agora est√° na lista de ocupadas
                        if (data.includes(selectedSeat)) {
                            clearInterval(checkInterval);
                            
                            // Atualiza lista local
                            occupiedSeats.push(selectedSeat);
                            updateSeatStatus();
                            
                            // Mostra mensagem de sucesso
                            showMessage(
                                `üéâ Reserva confirmada! C√≥digo: ${checkinCode}`,
                                'success'
                            );
                            
                            // Atualiza display
                            document.getElementById('display-status').innerHTML = 
                                '<span style="color: #4CAF50;">‚úÖ Reserva confirmada!</span>';
                            
                            // Esconde formul√°rio ap√≥s 5 segundos
                            setTimeout(() => {
                                hideReservationForm();
                            }, 5000);
                        }
                    });
            }, 5000); // Verifica a cada 5 segundos
            
            // Para o monitoramento ap√≥s 5 minutos
            setTimeout(() => {
                clearInterval(checkInterval);
            }, 300000);
        }
        
        // ============================================
        // FUN√á√ïES AUXILIARES
        // ============================================
        function generateCheckinCode() {
            const prefix = "B777";
            const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
            let code = '';
            
            for (let i = 0; i < 6; i++) {
                code += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            
            return `${prefix}-${code}`;
        }
        
        function showMessage(text, type) {
            const message = document.getElementById('message');
            message.textContent = text;
            message.className = `message ${type}`;
            message.style.display = 'block';
            
            setTimeout(() => {
                message.style.display = 'none';
            }, 5000);
        }
        
        // ============================================
        // TESTE DO SISTEMA
        // ============================================
        window.testSystem = function() {
            // Encontra primeira poltrona dispon√≠vel
            const availableSeats = document.querySelectorAll('.seat:not(.occupied)');
            if (availableSeats.length > 0) {
                const testSeat = availableSeats[0].dataset.seat;
                selectSeat(testSeat);
                
                setTimeout(() => {
                    showReservationForm();
                    showMessage('üß™ Sistema de teste ativado!', 'info');
                }, 1000);
            }
        };
        
        // ============================================
        // INICIALIZA√á√ÉO AUTOM√ÅTICA
        // ============================================
        console.log('‚úàÔ∏è Sistema Boeing 777 - Tudo em Um');
        console.log('üîó API:', API_URL);
        console.log('üìã Forms:', FORM_URL);
        console.log('üí° Para testar, digite: testSystem()');
    </script>
</body>
</html>
